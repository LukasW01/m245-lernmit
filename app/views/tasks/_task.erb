<%= link_to task_url(task), class: "#{'status' if task.status == 'completed'} #{'text-danger' if task.due_date < Time.now && task.status == 'upcoming'}", tabindex: "0", 'up-layer': 'new' do %>
  <li class="group flex p-4 pr-6 focus-within:bg-gray-50 hover:bg-gray-50 dark:focus-within:bg-gray-700 dark:hover:bg-gray-700">
    <div class="flex-auto">
      <p class="font-semibold text-gray-900 dark:text-gray-100"><%= task.title %></p>
      <time datetime="<%= task.due_date %>" class="mt-2 flex items-center text-gray-700 dark:text-gray-300">
        <svg class="mr-2 h-5 w-5 text-gray-400 dark:text-gray-500" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm.75-13a.75.75 0 00-1.5 0v5c0 .414.336.75.75.75h4a.75.75 0 000-1.5h-3.25V5z" clip-rule="evenodd" />
        </svg>
        <%= task.due_date.strftime('%d-%m-%Y %I:%M %p') %>
      </time>
    </div>
    <% if can? :edit, Task %>
      <div class="flex flex-none self-center space-x-2 ml-auto">
        <%= link_to edit_task_path(task), class: "rounded-md bg-gray-100 px-3 py-2 font-semibold text-gray-900 opacity-0 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 focus:opacity-100 group-hover:opacity-100 dark:bg-gray-700 dark:text-gray-200 dark:ring-gray-600 dark:hover:ring-gray-500", tabindex: "0", 'up-layer': 'new' do %>
          Edit <span class="sr-only">, <%= task.title %></span>
        <% end %>
        <%= link_to task_url(task), 'up-layer': 'current', method: :delete, class: 'rounded-md bg-red-500 px-3 py-2 font-semibold text-white opacity-0 shadow-sm ring-1 ring-inset ring-red-500 hover:ring-red-600 focus:opacity-100 group-hover:opacity-100 dark:bg-red-700 dark:text-white dark:ring-red-600 dark:hover:ring-red-500' do %>
          Delete <span class="sr-only">, <%= task.title %></span>
        <% end %>
      </div>
    <% end %>
  </li>
<% end %>

  